<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" template="/WEB-INF/templates/default.xhtml" 
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <div id="wrapper">
            <section>
                
                <!-- Tabla de Datos -->
                
                <h:form id="formPaciente">
                    <p:growl for="msg" globalOnly="true"/>
                                        
                    <p:remoteCommand name="rc" action="#{pacienteBean.init}" autoRun="false" update="tablePacientes"/>
                    
                    <p:dataTable id="tablePacientes" value="#{pacienteBean.listaPaciente}" var="paciente" 
                        paginator="true" paginatorPosition="bottom" rows="15" rowKey="#{paciente.id}"
                        selectionMode="single" selection="#{pacienteBean.selectedPaciente}" 
                        resizableColumns="true" lazy="true" filterEvent="enter"
                        paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}">

                        <f:facet name="header">
                            <p:outputLabel value="Consultar Pacientes" style="font-size: 1.5em;"/>
                        </f:facet>
                        
                        <p:column headerText="Identidicacion" filterBy="#{paciente.id}" sortBy="#{paciente.id}">
                            <p:outputLabel value="#{paciente.id}"/>
                        </p:column>
                        <p:column headerText="Apellidos" filterBy="#{paciente.primerApellido}" sortBy="#{paciente.primerApellido}">
                            <p:outputLabel value="#{paciente.primerApellido} "/>
                        </p:column>
                         <p:column headerText="Nombre Responsable" filterBy="#{paciente.responsableId.nombre}" sortBy="#{paciente.responsableId.nombre}">
                            <p:outputLabel value="#{paciente.responsableId.nombre}"/>
                        </p:column>
                        
                        <f:facet name ="footer">
                            <p:row>
                                <p:column>
                                    <h:commandLink value="Agregar Paciente" title="AÃ±adir Paciente Seleccionado" action="agrega_paciente"  />
                                 </p:column>
                                <p:column><p:spacer width="15"/>-<p:spacer width="15"/></p:column>
                                <p:column>
                                    <h:commandLink value="Observar Paciente" title="Observar Paciente Seleccionado" action="informacion_paciente" />
                                 </p:column>
                            </p:row>
                            
                        </f:facet>
                        
                    </p:dataTable>
                    
                </h:form>
        	
                
            </section>
        </div>
    </ui:define>
</ui:composition>